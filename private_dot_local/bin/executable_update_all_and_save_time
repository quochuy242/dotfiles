#!/bin/bash 

# Check the notify-send command
if ! command -v notify-send &> /dev/null; then
  echo "notify-send command not available, please install libnotify-bin"
  exit 1
fi

# Update all packages, both AUR and official
if [ -x "$(command -v yay)" ]; then
  yay -Syu --noconfirm
elif [ -x "$(command -v paru)" ]; then
  paru -Syu --noconfirm
else
  notify-send -i dialog-warning "Warning" "yay or paru command not found, just update the official packages"
  sudo pacman -Syu --noconfirm
fi

# Save the time to a file
echo "$(date +%s)" > ~/.last_system_update
